## 프라이빗 vs 퍼블릭 vs 탄력적 IP

### 퍼블릭 IP

- 기기가 인터넷상에서 식별될 수 있음
- 전체 웹에서 유일한 것

<br>

### 프라이빗 IP

- 기기가 오직 사설 네트워크 안에서만 식별될 수 있음
- 사설 네트워크 안에서만 유일한 것
- 기기가 사설 네트워크에 있을 때, NAT 장치와 프록시 역할을 할 인터넷 게이트웨이를 통해 인터넷에 연결

<br>

### 탄력적 IP

- EC2 인스턴스를 시작하고 중지할 때 퍼블릭 IP를 바꿀 수 있다.
- 인스턴스에 고정된 공용 IP를 사용하려면 탄력적 IP가 필요하다.
- 공용 IPv4로, 삭제하지 않는 한 계속 가지고 있게 된다.
- 한 번에 한 인스턴스에만 첨부 가능
- IP 주소가 탄력적이면 한 인스턴스에서 다른 인스턴스로 빠르게 이동함으로써 인스턴스나 소프트웨어의 오류를 마스킹할 때 사용할 수 있다.
- 계정 당 탄력적 IP를 5개만 쓸 수 있다.
- 탄력적 IP를 쓰지 않는것이 좋음
  - 임의의 공용 IP를 써서 DNS를 할당하는 것이 좋다.
  - 로드 밸런서를 사용해서 공용 IP를 전혀 사용하지 않을 수 있다.
    - 최상의 패턴

<br>
<br>

## EC2 배치 그룹

- EC2 인스턴스가 AWS 인프라에 배치되는 방식을 제어할 때 사용

<br>

### 배치 그룹 종류

- 클러스터 배치 그룹
  - 단일 가용 영역 내에서 지연 시간이 짧은 하드웨어 설정으로 인스턴스를 그룹화
  - 모든 EC2 인스턴스가 동일한 랙에 있음
  - 높은 성능과 높은 네트워크 속도를 제공하지만, 위험성이 높음 (하드웨어에 실패가 발생하면 모든 인스턴스가 동시에 실패함)
- 분산 배치 그룹
  - 모든 인스턴스가 다른 하드웨어에 분산
  - 동시 실패의 위험성이 감소
  - 가용 영역별로 분산된 배치 그룹당 7개의 EC2 인스턴스만 가질 수 있다는 제한사항이 있다.
  - 크리티컬한 애플리케이션이 있는 경우 분산 배치 그룹을 사용
- 분할 배치 그룹

  - 여러 가용 영역의 파티션에 인스턴스를 분산
  - 여러 파티션에 인스턴스가 분할되어 있고, 이 파티션은 가용 영역 내의 다양한 하드웨어 랙 세트에 의존
  - 인스턴스와 파티션은 다른 파티션의 인스턴스와 동일한 하드웨어 물리적 랙을 공유하지 않으므로 각 파티션은 실패로부터 격리된다.
  - 가용 영역당 최대 7개의 파티션이 있을 수 있음

<br>
<br>

## ENI (**Elastic Network Interface, 탄력적 네트워크 인터페이스**)

- VPC9
  - 논리적 구성 요소로, 가상 네트워크 카드를 나타냄
- ENI
  - EC2 인스턴스가 네트워크에 액세스할 수 있게 한다.
  - EC2 외부에서도 사용 가능
- ENI의 속성
  - 주요 프라이빗 IPv4, 하나 이상의 보조 IPv4를 가질 수 있다.
  - 프라이빗 IPv4 당 탄력적 IPv4를 가지거나, 하나의 퍼블릭 IPv4를 가질 수 있다.
- ENI에 하나 이상의 보안 그룹을 연결할 수 있다.
- EC2 인스턴스와 독립적으로 ENI를 생성하고 즉시 연결하거나, 장애 조치를 위해 EC2 인스턴스에서 이동시킬 수 있다.
- ENI는 특정 가용 영역(AZ)에 바인딩된다.
  - 특정 AZ에서 ENI를 생성하면 해당 AZ에서만 바인딩 가능

<br>
<br>

## EC2 Hibernate 모드 (절전모드)

- 인스턴스를 중지하면 EBS 디스크 데이터는 다시 시작할 때까지 그대로 유지된다.
- 인스턴스를 종료하면 루트 볼륨이 삭제되도록 했다면 인스턴스도 삭제됨. 그렇게 설정하지 않은 다른 볼륨은 그대로 남음
- 인스턴스가 절전모드가 되면 RAM에 있던 메모리 상태는 그대로 보존된다.
  - 인스턴스 부팅이 빨라진다.
  - RAM의 크기는 최대 150GB
  - 최대 60일까지 사용할 수 있음
- 절전모드가 되고 백그라운드에서 RAM에 기록된 인 메모리 상태는 루트 경로의 EBS 볼륨에 기록되기 때문에 루트 EBS 볼륨을 암호화해야하고, 볼륨 용량도 RAM을 저장하기에 충분해야 한다.

<br>

### 과정

- 절정모드를 켜면 실행중인 인스턴스는 중지되고, RAM의 내용은 EBS 볼륨에 덤프된다.
- 이 상태로 인스턴스를 중지하면 RAM은 사라지지만, EBS 볼륨에 덤프된 내용은 사라지지 않는다.
- 인스턴스를 다시 실행하면 디스크에서 RAM을 불러와 EC2 인스턴스 메모리로 가져간다.
- 즉, EC2 인스턴스를 중지한 적 없는 것처럼 된다.

<br>

### 사용사례

- 오래 실행되는 프로세스를 갖고 있고 중지하지 않을 때
- RAM 상태를 저장하고 싶을 때
- 빠르게 재부팅을 하고 싶을 때
